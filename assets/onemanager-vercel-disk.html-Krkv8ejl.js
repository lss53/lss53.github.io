import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,a as n,o as t}from"./app-vwWfBrnh.js";const a={};function i(l,e){return t(),r("div",null,[...e[0]||(e[0]=[n('<h2 id="前提条件" tabindex="-1"><a class="header-anchor" href="#前提条件"><span>前提条件</span></a></h2><p>在开始之前，请确保您已准备好以下资源：</p><ul><li>一个 Microsoft 365 开发者账户 (E5) 或普通的 OneDrive 账户。<br> -一个 <a href="https://vercel.com/" target="_blank" rel="noopener noreferrer">Vercel</a> 账户。</li><li>(可选) 一个您自己的域名。</li></ul><h2 id="一、申请-azure-应用凭据" tabindex="-1"><a class="header-anchor" href="#一、申请-azure-应用凭据"><span>一、申请 Azure 应用凭据</span></a></h2><p>为了让 OneManager 能够访问您的 OneDrive 数据，需要在 Azure 门户中注册一个应用程序。</p><h3 id="_1-注册新应用" tabindex="-1"><a class="header-anchor" href="#_1-注册新应用"><span>1. 注册新应用</span></a></h3><ol><li>登录 <a href="https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade" target="_blank" rel="noopener noreferrer">Azure 门户 - 应用注册</a>。</li><li>点击 <code>+ 新注册</code>。</li><li><strong>名称</strong>: 任意填写，如 <code>MyOneManager</code>。</li><li><strong>受支持的帐户类型</strong>: 选择 <code>任何组织目录...和个人 Microsoft 帐户...</code> (多租户)。</li><li><strong>重定向 URI</strong>: 选择 <code>Web</code> 平台，并输入 <code>https://scfonedrive.github.io</code>。</li><li>点击 <code>注册</code>。</li><li>在应用概览页面，<strong>复制并保存 <code>应用程序(客户端) ID</code></strong>，备用。</li></ol><h3 id="_2-创建客户端密码" tabindex="-1"><a class="header-anchor" href="#_2-创建客户端密码"><span>2. 创建客户端密码</span></a></h3><ol><li>在应用管理页面，进入 <code>证书和密码</code> 菜单。</li><li>点击 <code>+ 新建客户端密码</code>。</li><li><strong>说明</strong>: 任意填写。</li><li><strong>截止期限</strong>: 建议选择 <code>24 个月</code>。</li><li>点击 <code>添加</code>。</li><li><strong>立即复制并保存生成的客户端密码的 <code>值</code></strong>。此值只显示一次，离开页面后将无法查看。</li></ol><h3 id="_3-配置-api-权限" tabindex="-1"><a class="header-anchor" href="#_3-配置-api-权限"><span>3. 配置 API 权限</span></a></h3><ol><li>进入 <code>API 权限</code> 菜单。</li><li>确保 <code>Microsoft Graph</code> 下已有以下<strong>委托的权限</strong>，若没有请手动添加： <ul><li><code>User.Read</code> (默认应已存在)</li><li><code>Files.Read.All</code></li><li><code>offline_access</code></li></ul></li><li>添加后，点击 <code>代表...授予管理员同意</code> (如果可用)。</li></ol><h2 id="二、创建-vercel-访问令牌-token" tabindex="-1"><a class="header-anchor" href="#二、创建-vercel-访问令牌-token"><span>二、创建 Vercel 访问令牌 (Token)</span></a></h2><ol><li>访问 <a href="https://vercel.com/account/tokens" target="_blank" rel="noopener noreferrer">Vercel - Account Tokens</a>。</li><li>输入一个令牌名称，<code>SCOPE</code> 选择 <code>Full Account</code>，<code>EXPIRATION</code> 选择 <code>No Expiration</code>。</li><li>点击 <code>Create</code>，<strong>并立即复制保存生成的 Token</strong>。</li></ol><h2 id="三、部署-onemanager-到-vercel" tabindex="-1"><a class="header-anchor" href="#三、部署-onemanager-到-vercel"><span>三、部署 OneManager 到 Vercel</span></a></h2><p>我们将使用 <code>scfonedrive</code> 提供的在线部署工具。</p><ol><li>下载最新的 OneManager-php 源码包：<a href="https://github.com/qkqpttgf/OneManager-php/archive/refs/heads/master.zip" target="_blank" rel="noopener noreferrer">master.zip</a>。</li><li>打开在线部署页面：<a href="https://scfonedrive.github.io/Vercel/Deploy.html" target="_blank" rel="noopener noreferrer">Vercel Deploy Helper</a>。</li><li><strong>Input Token</strong>: 粘贴您在第二步中创建的 Vercel Token，并点击 <code>Check</code>。</li><li><strong>Choose the zip file</strong>: 选择您刚下载的 <code>OneManager-php-master.zip</code> 文件。</li><li>点击 <code>Deploy</code>，等待部署完成。</li><li>部署成功后，点击页面上提供的任一 Vercel 域名进入初始化配置。</li></ol><h2 id="四、配置-onemanager" tabindex="-1"><a class="header-anchor" href="#四、配置-onemanager"><span>四、配置 OneManager</span></a></h2><ol><li><p><strong>首次安装</strong>:</p><ul><li>选择语言为 <code>简体中文</code>。</li><li><code>Token</code> 处输入一个自定义的 Token（用于后台管理）。</li><li>设置 <code>admin password</code> (后台登录密码)。</li><li>点击 <code>确定</code> 完成安装。</li></ul></li><li><p><strong>挂载 OneDrive</strong>:</p><ul><li>返回首页，使用您设置的密码登录后台。</li><li>进入 <code>管理</code> → <code>设置</code>，在 <code>OneDrive</code> 处点击 <code>添加盘</code>。</li><li><strong>标签</strong> 和 <strong>显示名称</strong>: 自定义，如 <code>MyDisk</code>。</li><li><strong>账户类型</strong>: 根据您的 OneDrive 版本选择。</li><li>勾选 <code>用自己申请的应用ID与机密</code>，并填入您在第一步中保存的 <code>客户端 ID</code> 和 <code>客户端密码值</code>。</li><li>点击 <code>确认</code>，页面将跳转到微软登录授权，完成授权即可。</li></ul></li><li><p><strong>设置公开目录</strong>:</p><ul><li>在您的 OneDrive 中创建一个名为 <code>public</code> 的文件夹，您希望公开分享的文件都放在此文件夹内。</li><li>返回 OneManager 管理后台，在您刚添加的 <code>MyDisk</code> 盘的设置中，将 <code>public_path</code> 设置为 <code>/public/</code>，并保存。</li></ul></li><li><p><strong>个性化设置</strong>:<br> 在 <code>平台变量</code> 设置中，您可以自定义网站名称 (<code>sitename</code>)、主题 (<code>theme</code>) 等。</p></li></ol><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果添加文件后页面没有显示，请尝试在管理后台使用 <code>刷新当前目录的缓存</code> 功能。</p></div><h2 id="五、绑定自定义域名-可选" tabindex="-1"><a class="header-anchor" href="#五、绑定自定义域名-可选"><span>五、绑定自定义域名 (可选)</span></a></h2><ol><li>在 Vercel 项目的 <code>Settings</code> → <code>Domains</code> 中，添加您自己的域名。</li><li>根据 Vercel 的提示，到您的域名注册商处添加相应的 <code>A</code> 记录或 <code>CNAME</code> 记录。</li><li>等待 DNS 解析生效后，即可通过您的域名访问网盘。</li></ol>',21)])])}const s=o(a,[["render",i]]),p=JSON.parse('{"path":"/dev/website/onemanager-vercel-disk.html","title":"使用 OneManager + OneDrive + Vercel 快速搭建个人在线网盘","lang":"zh-CN","frontmatter":{"title":"使用 OneManager + OneDrive + Vercel 快速搭建个人在线网盘","shortTitle":"OneManager 网盘搭建","date":"2024-01-31T00:00:00.000Z","icon":"fas fa-cloud","order":2,"category":["网站搭建"],"tag":["在线网盘","OneManager","OneDrive","Vercel"],"description":"本文详细介绍如何利用 OneManager 开源程序、Microsoft OneDrive 云存储和 Vercel 无服务器平台，快速搭建一个功能完善、可自定义域名的个人在线网盘系统。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用 OneManager + OneDrive + Vercel 快速搭建个人在线网盘\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-31T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-13T03:47:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"诗往哥\\",\\"url\\":\\"/intro.html\\"}]}"],["meta",{"property":"og:url","content":"https:////211777.xyz/dev/website/onemanager-vercel-disk.html"}],["meta",{"property":"og:site_name","content":"诗往哥的博客"}],["meta",{"property":"og:title","content":"使用 OneManager + OneDrive + Vercel 快速搭建个人在线网盘"}],["meta",{"property":"og:description","content":"本文详细介绍如何利用 OneManager 开源程序、Microsoft OneDrive 云存储和 Vercel 无服务器平台，快速搭建一个功能完善、可自定义域名的个人在线网盘系统。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-13T03:47:16.000Z"}],["meta",{"property":"article:tag","content":"Vercel"}],["meta",{"property":"article:tag","content":"OneDrive"}],["meta",{"property":"article:tag","content":"OneManager"}],["meta",{"property":"article:tag","content":"在线网盘"}],["meta",{"property":"article:published_time","content":"2024-01-31T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-13T03:47:16.000Z"}]]},"git":{"createdTime":1757733483000,"updatedTime":1757735236000,"contributors":[{"name":"lss53","username":"lss53","email":"2720626504@qq.com","commits":2,"url":"https://github.com/lss53"}]},"readingTime":{"minutes":3.36,"words":1009},"filePathRelative":"dev/website/onemanager-vercel-disk.md","excerpt":"<h2>前提条件</h2>\\n<p>在开始之前，请确保您已准备好以下资源：</p>\\n<ul>\\n<li>一个 Microsoft 365 开发者账户 (E5) 或普通的 OneDrive 账户。<br>\\n-一个 <a href=\\"https://vercel.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Vercel</a> 账户。</li>\\n<li>(可选) 一个您自己的域名。</li>\\n</ul>\\n<h2>一、申请 Azure 应用凭据</h2>\\n<p>为了让 OneManager 能够访问您的 OneDrive 数据，需要在 Azure 门户中注册一个应用程序。</p>"}');export{s as comp,p as data};
