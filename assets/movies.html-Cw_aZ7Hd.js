import{_ as L}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as E,b as N,d as C,e as T,w as z,c as r,o as n,f as s,g as a,F as g,h,t as m,n as B,i as _,j as D,u as I}from"./app-vwWfBrnh.js";const $={class:"neodb-container"},P={class:"neodb-nav"},S=["onClick"],j={key:0,class:"neodb-loading"},R={key:1,class:"neodb-error"},M={key:2,class:"neodb-no-data"},q={class:"neodb-list"},F={key:0,class:"neodb-image-error"},O=["src","onError"],U={key:2,class:"neodb-score"},V={class:"neodb-title"},W=["href"],Z="https://db.211777.xyz/api",A={__name:"NeoDB",setup(v){const p=["book","movie","tv","music","game"],c=E(null);let l=null;const e=N({type:"movie",status:"complete",finished:!1,paged:1,subjects:[],isLoading:!1,error:null}),f=async()=>{if(e.isLoading||e.finished)return;e.isLoading=!0;const o=new URLSearchParams({type:e.status,category:e.type,page:e.paged.toString()}),i=`${Z}?${o.toString()}`;try{const t=await fetch(i);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const d=await t.json();if(d.length>0){const u=d.filter(w=>!e.subjects.some(x=>x.item.id===w.item.id));u.length>0?e.subjects.push(...u):e.finished=!0}else e.finished=!0}catch(t){console.error("Error fetching data:",t),e.error="数据加载失败，请检查网络连接后重试。",e.finished=!0}finally{e.isLoading=!1}},y=()=>{!e.isLoading&&!e.finished&&(e.paged++,f())},b=o=>{e.type!==o&&(e.type=o,e.paged=1,e.finished=!1,e.subjects=[],e.error=null,f())},k=o=>{o.imageError=!0};return C(()=>{f(),l=new IntersectionObserver(o=>{o[0].isIntersecting&&y()}),c.value&&l.observe(c.value)}),T(()=>{l&&l.disconnect()}),z(c,(o,i)=>{l&&(i&&l.unobserve(i),o&&l.observe(o))}),(o,i)=>(n(),r("div",$,[s(" 导航栏 "),a("nav",P,[(n(),r(g,null,h(p,t=>a("span",{key:t,class:B(["neodb-navItem",{current:e.type===t}]),onClick:d=>b(t)},m(t),11,S)),64))]),s(" 初始加载提示 "),e.isLoading&&e.subjects.length===0?(n(),r("div",j," NeoDB 数据加载中，请稍候... ")):s("v-if",!0),s(" [优化] 错误提示 "),e.error?(n(),r("div",R,m(e.error),1)):s("v-if",!0),s(" 无数据提示 (在没有错误时显示) "),!e.isLoading&&e.subjects.length===0&&!e.error?(n(),r("div",M," 抱歉，暂无数据！ ")):s("v-if",!0),s(" 数据列表 "),a("div",q,[(n(!0),r(g,null,h(e.subjects,t=>(n(),r("div",{key:t.item.id,class:"neodb-item"},[s(" 封面图片加载失败时显示提示 "),t.imageError?(n(),r("div",F,[...i[0]||(i[0]=[a("i",{class:"fa-solid fa-face-sad-cry"},null,-1),_("，图片加载失败！ ",-1)])])):(n(),r("img",{key:1,src:t.item.cover_image_url,class:"neodb-image",onError:d=>k(t),loading:"lazy"},null,40,O)),s(" 评分 "),t.item.rating?(n(),r("div",U,[i[1]||(i[1]=a("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 20.1l5.82 3.682c1.066.675 2.37-.322 2.09-1.584l-1.543-6.926 5.146-4.667c.94-.85.435-2.465-.799-2.567l-6.773-.602L13.29.89a1.38 1.38 0 0 0-2.581 0l-2.65 6.53-6.774.602C.052 8.126-.453 9.74.486 10.59l5.147 4.666-1.542 6.926c-.28 1.262 1.023 2.26 2.09 1.585L12 20.099z"})],-1)),_(" "+m(t.item.rating),1)])):s("v-if",!0),s(" 标题 "),a("div",V,[a("a",{href:t.item.id,target:"_blank"},m(t.item.title),9,W)])]))),128))]),s(" 加载更多指示器 "),!e.finished&&e.subjects.length>0?(n(),r("div",{key:3,ref_key:"moreElementRef",ref:c,class:"block-more"},[...i[2]||(i[2]=[a("div",{class:"lds-ripple"},[a("div"),a("div")],-1)])],512)):s("v-if",!0)]))}},H=L(A,[["__scopeId","data-v-e3e7faca"]]),K={__name:"movies.html",setup(v){return(p,c)=>(n(),r("div",null,[D(I(H))]))}},Q=JSON.parse('{"path":"/movies.html","title":"观影","lang":"zh-CN","frontmatter":{"title":"观影","icon":"fas fa-film","article":false,"index":false,"sidebar":false,"comment":false,"Word":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"观影\\"}"],["meta",{"property":"og:url","content":"https:////211777.xyz/movies.html"}],["meta",{"property":"og:site_name","content":"诗往哥的博客"}],["meta",{"property":"og:title","content":"观影"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-13T06:56:08.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-13T06:56:08.000Z"}]]},"git":{"createdTime":1735816448000,"updatedTime":1757746568000,"contributors":[{"name":"lss53","username":"lss53","email":"2720626504@qq.com","commits":4,"url":"https://github.com/lss53"}]},"readingTime":{"minutes":0.09,"words":26},"filePathRelative":"movies.md","excerpt":""}');export{K as comp,Q as data};
